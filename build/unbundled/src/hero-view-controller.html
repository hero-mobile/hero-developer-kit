<html><head><script>HeroViewController={behaviors:[HeroBehavior],properties:{url:{type:String,observer:"setWebUrl"},title:{type:String},view:{type:Object},controller:{type:Object},heroContent:{type:Object},ui2data:{type:Object},appearObject:{type:Object}},findViewByname:function(e,t){if(e){if(e==t.id)return t;if(t.$&&t.$.heroContent)for(var i=0;i<t.$.heroContent.children.length;i++){var n=this.findViewByname(e,t.$.heroContent.children[i]);if(n)return n}for(var i=0;i<t.children.length;i++){var n=this.findViewByname(e,t.children[i]);if(n)return n}}},ui2Data:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)API.ui2Data(e[t]);else e.subViews&&API.ui2Data(e.subViews);e.name&&(ui2Data["_"+e.name]="",ui2Data.__defineSetter__(e.name,function(t){ui2Data["_"+e.name]=t;var i={name:e.name};"string"==typeof t?i.text=t:API.merge(i,t),API.out({datas:i})}),ui2Data.__defineGetter__(e.name,function(){return ui2Data["_"+e.name]}))},attached:function(){if(window.ui&&window.API){this.view=ui,this.controller=API,API.page=this;var e=document.createElement("div");e.style.display="block",e.style.position="absolute",e.style.overflow="hidden",e.style.height="100%",e.style.width="100%",this.appendChild(e),this.heroContent=e,this.view.backgroundColor?e.style.backgroundColor=APP.str2Color(this.view.backgroundColor):e.style.backgroundColor="#ffffff",this.view.nav&&(this.view.tintColor&&(this.view.nav.tintColor=this.view.tintColor),this.on({appearance:this.view.nav}))}},ready:function(){this.style.display="block",this.style.position="absolute",this.style.overflow="hidden",this.style.height="100%",this.style.width="100%"},viewWillAppear:function(){this.view&&this.view.nav?APP.setNav(this.view.nav):APP.setNav({title:this.title}),this.appearObject&&this.controller["in"](this.appearObject)},viewWillDisappear:function(){},setWebUrl:function(e){if(!API){var t=document.createElement("iframe");t.style.display="inline-block",t.style.position="absolute",t.style.overflow="hidden",t.style.top="0px",t.style.left="0px",t.style.border="0px",t.style.borderWidth="0px",t.style.height="100%",t.style.width="100%",t.src=e,this.appendChild(t);var i=this;t.onload=function(){i.title=t.contentDocument.title,APP.setNav({title:i.title})}}},on:function(e){if(e instanceof Array)for(var t in e)this.on(e[t]);else{if(e.ui){var i=e.ui.views;for(var t in i){var n=i[t],o=document.createElement(APP.camelCase2bar(n["class"]||n.res));o.setJson?(this.heroContent.appendChild(o),o.controller=this,n.frame,o.json=n):console.log(n["class"]||n.res)}}if(e.appearance)APP.setNav({nav:e.appearance});else if(e.ui_fragment)for(var t in e.ui_fragment){var o=e.ui_fragment[t];if(o.parent){var r=this.findViewByname(o.parent,this.heroContent);r.json={subViews:[o]}}else{var r=document.createElement(APP.camelCase2bar(o["class"]||o.res));this.heroContent.appendChild(r),r.controller=this,r.json=n,this.heroContent.appendChild(r)}}else if(e.datas){var a=e.datas;if(a instanceof Array)for(var t in a){var s=a[t],r=this.findViewByname(s.name,this.heroContent);r&&r.oon(s)}else{a.frame&&(a.frame.p={w:window.innerWidth,h:window.innerHeight});var r=this.findViewByname(a.name,this.heroContent);r&&r.oon(a)}}else if(e.command){var l=e.command;if("string"==typeof l)if("refresh"===l)window.location.reload();else if("showLoading"===l){var h=this.findViewByname("loading",this.heroContent);if(!h){var h=document.createElement("hero-loading");h.controller=this,this.heroContent.appendChild(h)}h.oon({show:!0,name:"loading"})}else if("stopLoading"===l){var h=this.findViewByname("loading",this.heroContent);h&&h.oon({show:!1})}else if("goto:"===l.substring(0,5)){var c=l.replace("goto:","");"tel"==c.substring(0,3)?this.on({command:{show:{title:"拨打电话"+c}}}):APP.gotoPage(c)}else"load:"===l.substring(0,5)?APP.gotoPage(l.substring(5,l.length)):"back"===l.substring(0,4)?window.history.back():"rootBack"===l.substring(0,8)?window.history.back():"present:"===l.substring(0,8)?APP.gotoPage(l.substring(8,l.length),"present"):"dismiss"===l.substring(0,7)?window.history.back():"submit"===l.substring(0,6);else if(l.show){if(l.show.action){var d=document.createElement("hero-confirm");d.controller=this,d.oon({text:l.show.content||"",action:l.show.action}),this.heroContent.appendChild(d)}else if(l.show.title||l.show.content){var f=document.createElement("hero-alert");f.controller=this,f.oon({text:l.show.title||""}),this.heroContent.appendChild(f)}else if(l.show["class"]){var p=document.createElement("hero-dialog");p.controller=this,p.json={str:JSON.stringify(l.show)},this.heroContent.appendChild(p)}}else if(l.delay){var w=l.delay,v=l.delayTime,u=this;setTimeout(function(){u.on(w)},v)}else l.viewWillAppear?(this.appearObject=l.viewWillAppear,l.viewWillAppear instanceof Array?this.controller["in"](l.viewWillAppear[0]):this.controller["in"](l.viewWillAppear)):l.viewWillDisappear}else e.hasOwnProperty("name")&&e.hasOwnProperty("value")&&(ui2Data["_"+e.name]=e.value),this.controller["in"](e)}}};</script>

</head><body></body></html>