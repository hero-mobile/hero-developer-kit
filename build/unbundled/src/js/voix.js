!function(t){"use strict";function i(t){this._lang=t,this.initialize()}var e=t.webkitSpeechRecognition;i.prototype.initialize=function(){return this._collection={},this._createRecognition(),this._bindKeyEvents(),this},i.prototype._createRecognition=function(){return this._recognition=new e,this._recognition.continuous=!0,this._recognition.interimResults=!1,this._recognition.lang=this._lang||"en-US",this._recognition.maxAlternatives=1,this._recognition.onresult=void 0,this._recognition.start(),this},i.prototype._bindKeyEvents=function(){var t=this,i=!1;return document.addEventListener("keydown",function(e){i||86!==e.keyCode||(t.start(),i=!0)}),document.addEventListener("keyup",function(t){i&&86===t.keyCode&&(i=!1)}),this},i.prototype._result=function(t){var i,e,n,o=this,s=t.resultIndex,r=t.results.length,c=0;for(s;s<r;s+=1)if(t.results[s].isFinal&&(n=t.results[s][0].transcript.replace(/^\s+|\s+$/g,"").toLowerCase(),o._collection[n]))for(i=o._collection[n].listeners,e=i.length,c;c<e;c+=1)i[c].call()},i.prototype.setCommand=function(t,i){return void 0===this._collection[t]&&(this._collection[t]={listeners:[]}),this._collection[t].listeners.push(i),this},i.prototype.removeCommand=function(t,i){var e=this._collection[t].listeners,n=0,o=e.length;if(void 0!==o)for(n;n<o;n+=1)if(e[n]===i){e.splice(n,1);break}return 0!==e.length&&void 0!==i||delete this._collection[t],this},i.prototype.start=function(){var t=this;return this._recognition.onresult=function(i){t._result.call(t,i)},this},i.prototype.stop=function(){return this._recognition.onresult=void 0,this},"function"==typeof t.define&&void 0!==t.define.amd?t.define("Voix",[],function(){return i}):"undefined"!=typeof module&&void 0!==module.exports?module.exports=i:t.Voix=i}(this);